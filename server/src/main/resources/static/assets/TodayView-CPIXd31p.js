var L=Object.defineProperty;var E=(t,n,o)=>n in t?L(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o;var x=(t,n,o)=>E(t,typeof n!="symbol"?n+"":n,o);import{d as G,u as H,r as y,m as P,a as I,q as R,c as m,e as a,F,z as O,s as S,t as k,C,D as T,n as V,h as p,A as U,p as j,j as W,i as B,_ as z}from"./index-BJb9-PwR.js";import{G as K}from"./index-BxK1Kcup.js";import{d as N}from"./diary-n7vNuVSz.js";const X="/images/stamp.svg",q="/icons/loading.svg";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const Q=/[YMDHhms]o|\[([^\]]+)\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function Z(t,n,o,v){let s=t<12?"AM":"PM";return v&&(s=s.split("").reduce((e,h)=>e+=`${h}.`,"")),o?s.toLowerCase():s}function g(t){const n=["th","st","nd","rd"],o=t%100;return t+(n[(o-20)%10]||n[o]||n[0])}function J(t,n,o={}){var v;const s=t.getFullYear(),e=t.getMonth(),h=t.getDate(),c=t.getHours(),i=t.getMinutes(),f=t.getSeconds(),D=t.getMilliseconds(),M=t.getDay(),_=(v=o.customMeridiem)!=null?v:Z,b={Yo:()=>g(s),YY:()=>String(s).slice(-2),YYYY:()=>s,M:()=>e+1,Mo:()=>g(e+1),MM:()=>`${e+1}`.padStart(2,"0"),MMM:()=>t.toLocaleDateString(o.locales,{month:"short"}),MMMM:()=>t.toLocaleDateString(o.locales,{month:"long"}),D:()=>String(h),Do:()=>g(h),DD:()=>`${h}`.padStart(2,"0"),H:()=>String(c),Ho:()=>g(c),HH:()=>`${c}`.padStart(2,"0"),h:()=>`${c%12||12}`.padStart(1,"0"),ho:()=>g(c%12||12),hh:()=>`${c%12||12}`.padStart(2,"0"),m:()=>String(i),mo:()=>g(i),mm:()=>`${i}`.padStart(2,"0"),s:()=>String(f),so:()=>g(f),ss:()=>`${f}`.padStart(2,"0"),SSS:()=>`${D}`.padStart(3,"0"),d:()=>M,dd:()=>t.toLocaleDateString(o.locales,{weekday:"narrow"}),ddd:()=>t.toLocaleDateString(o.locales,{weekday:"short"}),dddd:()=>t.toLocaleDateString(o.locales,{weekday:"long"}),A:()=>_(c,i),AA:()=>_(c,i,!1,!0),a:()=>_(c,i,!0),aa:()=>_(c,i,!0,!0)};return n.replace(Q,(w,l)=>{var r,u;return(u=l??((r=b[w])==null?void 0:r.call(b)))!=null?u:w})}const ee="AIzaSyCXpx3BdoALyxXrn2TTS629kOaOR0POmuI";class te{constructor(n){x(this,"genAI",null);x(this,"model",null);x(this,"handleResult",()=>{});x(this,"generate",async n=>{try{const s=(await this.model.generateContent(n)).response.text();this.handleResult(s)}catch(o){console.log(o.message)}});this.handleResult=n,this.genAI=new K(ee),this.model=this.genAI.getGenerativeModel({model:"gemini-1.0-pro"})}}const $=t=>(j("data-v-259aaaee"),t=t(),W(),t),se={class:"flex items-center justify-between"},ae={key:0,class:"diary-container px-[30px] py-[60px] w-[35%] fade-in"},oe=$(()=>a("h1",{class:"text-4xl-bold mb-[30px] text-[#222222]"},"오늘의 감정",-1)),ne={class:"grid grid-cols-3"},le=["onClick"],ce=["src"],ie=$(()=>a("article",null,null,-1)),re={key:1,class:"w-[60%] fade-in relative"},ue={class:"diary-container px-[40px] py-[30px]"},de={class:"w-full flex items-end justify-between text-[#484848]"},me={class:"flex flex-col gap-[20px]"},pe={class:"text-lg-bold"},he=$(()=>a("p",{class:"text-lg-regular"},[B(" 오늘은 어떤 하루를 보내셨나요? "),a("br"),B(" 하루를 기록해보세요! ")],-1)),ve={class:"bg-white p-[20px] rounded-[20px] shadow-md flex items-center gap-[20px]"},ge=["src"],_e={class:"relative w-full"},fe=["disable"],xe={class:"absolute bottom-[10px] right-[10px] text-[#5B5B5B] text-sm-light"},ye={key:0,class:"absolute top-[-80px] right-[-50px]"},Se=$(()=>a("img",{src:X,alt:"diary",class:"w-[200px]"},null,-1)),$e=[Se],be={key:0,class:"flex justify-end mt-[20px]"},we=["disabled"],ke={key:0,src:q,class:"w-[30px] animate-spin"},De={key:1},Me={key:2,class:"diary-container px-[40px] py-[30px] w-[35%] fade-in text-[#434343]"},Ae={class:"w-full"},Ye={class:"text-lg-regular"},Ie=$(()=>a("div",{class:"w-full text-end"},[a("p",{class:"text-lg-regular"},"From. Mood Tracker")],-1)),Ce=G({__name:"TodayView",setup(t){const n=V(),{addToast:o}=H(),v=["Happy","Angry","Sad","IDK","Exhausted","Panicked","Blue","Upset","Peaceful"],s=y(null),e=y({date:"",emotion:"",content:"",feedback:""}),h=y(null),c=y(!1),i=y(!1);P(async()=>{await I.checkLogin()||(o({message:"로그인이 필요합니다."}),n.push("/login")),s.value=await I.getInformation(),h.value=new te(_),e.value.date=J(new Date,"YYYY-MM-DD")}),R(()=>e.value.content,l=>{l.length>1e3&&(e.value.content=l.slice(0,1e3))});const f=()=>{const l=new Date,r=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],u=l.getFullYear(),d=l.getMonth()+1,A=l.getDate(),Y=r[l.getDay()];return`${u}년 ${d}월 ${A}일 ${Y}`},D=l=>{e.value.emotion=l},M=()=>{c.value||(c.value=!0,b())},_=l=>{e.value.feedback=l,w()},b=()=>{const l=`사용자가 하루 동안 기록한 감정을 기반으로 따뜻하고 공감어린 피드백을 작성해줘. 감정에 따라 아래와 같은 피드백을 출력해줘. 각 피드백은 사용자의 감정과 일기 내용을 바탕으로 특별하고 맞춤형으로 작성되어야 해.

사용자 정보:
- 사용자 이름: ${s.value.name}
- 일기의 내용: ${e.value.content}
- 선택한 감정: ${e.value.emotion}

감정에 따른 피드백 예시:

- Happy: "${s.value.name}, 오늘 정말 기쁜 하루를 보낸 것 같아 기뻐요! 당신의 긍정적인 에너지가 ${e.value.content}을 통해 전해졌어요. 오늘 하루도 너무 수고 많았고, 내일도 이 기운 그대로 멋진 하루가 될 거예요!"

- Angry: "${s.value.name}, 오늘 화가 나는 일이 있었군요. ${e.value.content}을 읽으니 당신의 감정을 충분히 이해할 수 있어요. 때로는 화를 내는 것도 필요해요. 내일은 더 나은 날이 될 거예요. 당신을 항상 응원하고 있어요."

- Sad: "${s.value.name}, 오늘 슬픈 일이 있었군요. ${e.value.content}을 통해 당신의 마음이 느껴져요. 슬픔도 우리가 느껴야 할 중요한 감정이에요. 충분히 쉬고, 당신이 소중한 존재라는 걸 잊지 마세요. 내일은 더 나은 날이 될 거예요."

- Exhausted: "${s.value.name}, 오늘 많이 피곤했나 봐요. ${e.value.content}을 읽으니 정말 힘든 하루를 보낸 것 같아요. 충분히 쉬어야 해요. 당신의 건강이 가장 중요해요. 내일은 더 활기찬 하루가 되길 바랄게요."

- Panicked: "${s.value.name}, 오늘 두려움을 느낀 일이 있었군요. ${e.value.content}을 보니 얼마나 힘들었을지 이해가 돼요. 두려움은 우리를 성장하게 하는 감정이에요. 당신이 이겨낼 수 있다는 걸 믿어요. 내일은 더 안정된 하루가 될 거예요."

- IDK: "${s.value.name}, 오늘 무기력한 하루를 보냈군요. ${e.value.content}을 보니 모든 것이 귀찮게 느껴졌겠어요. 누구나 가끔은 이렇게 느낄 때가 있어요. 충분히 쉬고, 자신을 돌봐주세요. 내일은 더 활기찬 하루가 되길 바라요."

- Blue: "${s.value.name}, 오늘 우울한 기분이었군요. ${e.value.content}을 통해 당신의 마음이 느껴져요. 우울함도 우리가 겪는 중요한 감정이에요. 충분히 쉬고, 자신을 잘 돌봐주세요. 내일은 더 나은 날이 되길 바랄게요."

- Upset: "${s.value.name}, 오늘 속상한 일이 있었군요. ${e.value.content}을 보니 얼마나 마음이 아팠을지 이해가 돼요. 속상함을 느끼는 것도 중요해요. 충분히 쉬고, 자신을 잘 돌봐주세요. 내일은 더 나은 날이 될 거예요."

- Peaceful: "${s.value.name}, 오늘 평온한 하루를 보낸 것 같아 기뻐요. ${e.value.content}을 읽으니 당신의 마음이 안정된 것 같아 좋네요. 평온한 하루를 보낸 만큼 내일도 이렇게 평온하길 바랄게요."

출력 형식:

${s.value.name}, 사용자가 선택한 감정에 따라 적절한 피드백을 여기에 삽입하세요.`;h.value.generate(l)},w=async()=>{var u;const l={emotion:e.value.emotion,content:e.value.content,feedback:e.value.feedback,feedbackCode:"SUCCESS"};await N.createDiary((u=s.value)==null?void 0:u.name,l)&&(c.value=!1,i.value=!0)};return(l,r)=>{var u;return p(),m("div",se,[i.value?S("",!0):(p(),m("section",ae,[oe,a("article",ne,[(p(),m(F,null,O(v,(d,A)=>a("button",{key:A,class:U(["emotion-box",e.value.emotion===d?"bg-[#D0A7EB]":"bg-white"]),onClick:Y=>D(d)},[a("img",{src:`/icons/emotions/${d}.svg`,alt:"emotion",class:"w-[60px]"},null,8,ce)],10,le)),64))]),ie])),e.value.emotion?(p(),m("section",re,[a("article",ue,[a("div",de,[a("div",me,[a("label",pe,k(f()),1),he]),a("span",ve,[a("img",{src:`/icons/emotions/${e.value.emotion}.svg`,alt:"emotion",class:"w-[30px]"},null,8,ge),a("p",null,k(e.value.emotion),1)])]),a("div",_e,[C(a("textarea",{"onUpdate:modelValue":r[0]||(r[0]=d=>e.value.content=d),class:"h-[calc(45vh)]",disable:i.value},null,8,fe),[[T,e.value.content]]),a("p",xe,k(e.value.content.length)+"/1000 ",1)]),i.value?(p(),m("div",ye,$e)):S("",!0)]),i.value?S("",!0):(p(),m("div",be,[a("button",{class:"btn-primary p-[10px]",onClick:M,disabled:c.value},[c.value?(p(),m("img",ke)):(p(),m("p",De,"Submit"))],8,we)]))])):S("",!0),i.value?(p(),m("section",Me,[a("div",Ae,[a("p",Ye,"To. "+k((u=s.value)==null?void 0:u.name),1)]),C(a("textarea",{"onUpdate:modelValue":r[1]||(r[1]=d=>e.value.feedback=d),class:"h-[calc(50vh)]",disabled:""},null,512),[[T,e.value.feedback]]),Ie])):S("",!0)])}}}),Ge=z(Ce,[["__scopeId","data-v-259aaaee"]]);export{Ge as default};
