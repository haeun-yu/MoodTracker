import{v as Rt,d as nt,r as v,o as ot,q as st,c as A,e as g,s as F,h as D,p as rt,j as at,_ as it,u as It,a as Te,t as P,F as jt,x as Tt,f as Ee,w as Et,k as Ot,D as Wt,n as Lt,g as Yt,A as Xt}from"./index-_11a-uGJ.js";import{c as $t}from"./calendar-CCEJcPqg.js";import{G as Bt}from"./gemini-DwKNDCid.js";import{d as zt,C as q,i as G,b as W,c as Ht,u as Nt,e as X,f as Ce,g as lt,h as S,v as J,E as B,t as _,j as le,k as Se,l as Vt,P as C,m as Ft,n as ae,o as Ut,q as qt,Q as V,H as te,T as Oe,r as Jt,s as We,R as dt,w as Gt}from"./chart-CU4pDdqY.js";const Kt="/icons/emotions/Happy.svg",Qt="/icons/emotions/Proud.svg",Zt="/icons/emotions/Excited.svg",en="/icons/emotions/Grateful.svg",tn="/icons/emotions/IDK.svg",nn="/icons/emotions/Sad.svg",on="/icons/emotions/Angry.svg",sn="/icons/emotions/Panicked.svg",rn="/icons/emotions/Exhausted.svg",de=Rt.create({baseURL:"https://moodTracker.online:443/api/report",withCredentials:!0}),an=async(t,e)=>{try{const n=await de.get(`/monthlyFeedback/${t}`,{params:{requestYearMonth:e}});return console.log("getReport response: ",n),n.data.data.resultCode&&n.data.data.resultCode!=="SUCCESS"||n.data.data===null?null:n.data.data.monthlyFeedback}catch(n){return console.log("getReport error: ",n),null}},ln=async t=>{try{const e=await de.post("/submit",t);return console.log("createReport response: ",e),e.data.data.resultCode==="SUCCESS"}catch(e){return console.log("createReport error: ",e),!1}},dn=async(t,e)=>{try{const n=await de.get(`/chart/${t}`,{params:{requestYearMonth:e}});return console.log("getMonthScore response: ",n),n.data.data.resultCode&&n.data.data.resultCode==="FAIL"?[]:n.data.data}catch(n){return console.log("getMonthScore error: ",n),[]}},cn=async(t,e)=>{try{const n=await de.get(`/check/${t}`,{params:{requestYearMonth:e}});return console.log("checkReport response: ",n),!(n.data.data.resultCode&&n.data.data.resultCode==="FAIL"||n.data.data.message&&n.data.data.message==="false")}catch(n){return console.log("checkReport error: ",n),!1}},ne={getReport:an,createReport:ln,getMonthScore:dn,checkReport:cn},un="/icons/positive.svg",fn="/icons/negative.svg";/*!
* chartjs-plugin-annotation v3.0.1
* https://www.chartjs.org/chartjs-plugin-annotation/index
 * (c) 2023 chartjs-plugin-annotation Contributors
 * Released under the MIT License
 */const Le={modes:{point(t,e){return re(t,e,{intersect:!0})},nearest(t,e,n){return pn(t,e,n)},x(t,e,n){return re(t,e,{intersect:n.intersect,axis:"x"})},y(t,e,n){return re(t,e,{intersect:n.intersect,axis:"y"})}}};function _e(t,e,n){return(Le.modes[n.mode]||Le.modes.nearest)(t,e,n)}function hn(t,e,n){return n!=="x"&&n!=="y"?t.inRange(e.x,e.y,"x",!0)||t.inRange(e.x,e.y,"y",!0):t.inRange(e.x,e.y,n,!0)}function gn(t,e,n){return n==="x"?{x:t.x,y:e.y}:n==="y"?{x:e.x,y:t.y}:e}function re(t,e,n){return t.visibleElements.filter(o=>n.intersect?o.inRange(e.x,e.y):hn(o,e,n.axis))}function pn(t,e,n){let o=Number.POSITIVE_INFINITY;return re(t,e,n).reduce((s,r)=>{const a=r.getCenterPoint(),i=gn(e,a,n.axis),l=Se(e,i);return l<o?(s=[r],o=l):l===o&&s.push(r),s},[]).sort((s,r)=>s._index-r._index).slice(0,1)}const bn=(t,e)=>e>t||t.length>e.length&&t.slice(0,e.length)===e,O=.001,ce=(t,e,n)=>Math.min(n,Math.max(e,t));function yn(t,e,n){for(const o of Object.keys(t))t[o]=ce(t[o],e,n);return t}function mn(t,e,n,o){if(!t||!e||n<=0)return!1;const s=o/2;return Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)<=Math.pow(n+s,2)}function ct(t,{x:e,y:n,x2:o,y2:s},r,a){const i=a/2,l=t.x>=e-i-O&&t.x<=o+i+O,d=t.y>=n-i-O&&t.y<=s+i+O;return r==="x"?l:(r==="y"||l)&&d}function z(t,e){const{centerX:n,centerY:o}=t.getProps(["centerX","centerY"],e);return{x:n,y:o}}function wn(t,e,n,o=!0){const s=n.split(".");let r=0;for(const a of e.split(".")){const i=s[r++];if(parseInt(a,10)<parseInt(i,10))break;if(bn(i,a)){if(o)throw new Error(`${t} v${n} is not supported. v${e} or newer is required.`);return!1}}return!0}const ut=t=>typeof t=="string"&&t.endsWith("%"),ft=t=>parseFloat(t)/100,ht=t=>ce(ft(t),0,1),oe=(t,e)=>({x:t,y:e,x2:t,y2:e,width:0,height:0}),xn={box:t=>oe(t.centerX,t.centerY),ellipse:t=>({centerX:t.centerX,centerY:t.centerX,radius:0,width:0,height:0}),label:t=>oe(t.centerX,t.centerY),line:t=>oe(t.x,t.y),point:t=>({centerX:t.centerX,centerY:t.centerY,radius:0,width:0,height:0}),polygon:t=>oe(t.centerX,t.centerY)};function ke(t,e){return e==="start"?0:e==="end"?t:ut(e)?ht(e)*t:t/2}function j(t,e,n=!0){return typeof e=="number"?e:ut(e)?(n?ht(e):ft(e))*t:t}function vn(t,e){const{x:n,width:o}=t,s=e.textAlign;return s==="center"?n+o/2:s==="end"||s==="right"?n+o:n}function Me(t,e="center"){return G(t)?{x:J(t.x,e),y:J(t.y,e)}:(t=J(t,e),{x:t,y:t})}function gt(t){return t&&(S(t.xValue)||S(t.yValue))}function K(t,e,n){const o=n.init;if(o){if(o===!0)return bt(e,n)}else return;return Cn(t,e,n)}function pt(t,e,n){let o=!1;return e.forEach(s=>{X(t[s])?(o=!0,n[s]=t[s]):S(n[s])&&delete n[s]}),o}function bt(t,e){const n=e.type||"line";return xn[n](t)}function Cn(t,e,n){const o=Ce(n.init,[{chart:t,properties:e,options:n}]);if(o===!0)return bt(e,n);if(G(o))return o}const ge=new Map,Sn=t=>isNaN(t)||t<=0,_n=t=>t.reduce(function(e,n){return e+=n.string,e},"");function ue(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object HTMLImageElement]"||e==="[object HTMLCanvasElement]"}}function Pe(t,{x:e,y:n},o){o&&(t.translate(e,n),t.rotate(_(o)),t.translate(-e,-n))}function T(t,e){if(e&&e.borderWidth)return t.lineCap=e.borderCapStyle,t.setLineDash(e.borderDash),t.lineDashOffset=e.borderDashOffset,t.lineJoin=e.borderJoinStyle,t.lineWidth=e.borderWidth,t.strokeStyle=e.borderColor,!0}function H(t,e){t.shadowColor=e.backgroundShadowColor,t.shadowBlur=e.shadowBlur,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY}function Ae(t,e){const n=e.content;if(ue(n))return{width:j(n.width,e.width),height:j(n.height,e.height)};const o=e.font,s=W(o)?o.map(l=>ae(l)):[ae(o)],r=e.textStrokeWidth,a=W(n)?n:[n],i=a.join()+_n(s)+r+(t._measureText?"-spriting":"");return ge.has(i)||ge.set(i,Dn(t,a,s,r)),ge.get(i)}function yt(t,e,n){const{x:o,y:s,width:r,height:a}=e;t.save(),H(t,n);const i=T(t,n);t.fillStyle=n.backgroundColor,t.beginPath(),Ut(t,{x:o,y:s,w:r,h:a,radius:yn(qt(n.borderRadius),0,Math.min(r,a)/2)}),t.closePath(),t.fill(),i&&(t.shadowColor=n.borderShadowColor,t.stroke()),t.restore()}function kn(t,e,n){const o=n.content;if(ue(o)){t.save(),t.globalAlpha=jn(n.opacity,o.style.opacity),t.drawImage(o,e.x,e.y,e.width,e.height),t.restore();return}const s=W(o)?o:[o],r=n.font,a=W(r)?r.map(u=>ae(u)):[ae(r)],i=n.color,l=W(i)?i:[i],d=vn(e,n),c=e.y+n.textStrokeWidth/2;t.save(),t.textBaseline="middle",t.textAlign=n.textAlign,Mn(t,n)&&Rn(t,{x:d,y:c},s,a),In(t,{x:d,y:c},s,{fonts:a,colors:l}),t.restore()}function Mn(t,e){if(e.textStrokeWidth>0)return t.lineJoin="round",t.miterLimit=2,t.lineWidth=e.textStrokeWidth,t.strokeStyle=e.textStrokeColor,!0}function Pn(t,e,n,o){const{radius:s,options:r}=e,a=r.pointStyle,i=r.rotation;let l=(i||0)*dt;if(ue(a)){t.save(),t.translate(n,o),t.rotate(l),t.drawImage(a,-a.width/2,-a.height/2,a.width,a.height),t.restore();return}Sn(s)||An(t,{x:n,y:o,radius:s,rotation:i,style:a,rad:l})}function An(t,{x:e,y:n,radius:o,rotation:s,style:r,rad:a}){let i,l,d,c;switch(t.beginPath(),r){default:t.arc(e,n,o,0,Jt),t.closePath();break;case"triangle":t.moveTo(e+Math.sin(a)*o,n-Math.cos(a)*o),a+=Oe,t.lineTo(e+Math.sin(a)*o,n-Math.cos(a)*o),a+=Oe,t.lineTo(e+Math.sin(a)*o,n-Math.cos(a)*o),t.closePath();break;case"rectRounded":c=o*.516,d=o-c,i=Math.cos(a+V)*d,l=Math.sin(a+V)*d,t.arc(e-i,n-l,c,a-C,a-te),t.arc(e+l,n-i,c,a-te,a),t.arc(e+i,n+l,c,a,a+te),t.arc(e-l,n+i,c,a+te,a+C),t.closePath();break;case"rect":if(!s){d=Math.SQRT1_2*o,t.rect(e-d,n-d,2*d,2*d);break}a+=V;case"rectRot":i=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-i,n-l),t.lineTo(e+l,n-i),t.lineTo(e+i,n+l),t.lineTo(e-l,n+i),t.closePath();break;case"crossRot":a+=V;case"cross":i=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-i,n-l),t.lineTo(e+i,n+l),t.moveTo(e+l,n-i),t.lineTo(e-l,n+i);break;case"star":i=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-i,n-l),t.lineTo(e+i,n+l),t.moveTo(e+l,n-i),t.lineTo(e-l,n+i),a+=V,i=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-i,n-l),t.lineTo(e+i,n+l),t.moveTo(e+l,n-i),t.lineTo(e-l,n+i);break;case"line":i=Math.cos(a)*o,l=Math.sin(a)*o,t.moveTo(e-i,n-l),t.lineTo(e+i,n+l);break;case"dash":t.moveTo(e,n),t.lineTo(e+Math.cos(a)*o,n+Math.sin(a)*o);break}t.fill()}function Dn(t,e,n,o){t.save();const s=e.length;let r=0,a=o;for(let i=0;i<s;i++){const l=n[Math.min(i,n.length-1)];t.font=l.string;const d=e[i];r=Math.max(r,t.measureText(d).width+o),a+=l.lineHeight}return t.restore(),{width:r,height:a}}function Rn(t,{x:e,y:n},o,s){t.beginPath();let r=0;o.forEach(function(a,i){const l=s[Math.min(i,s.length-1)],d=l.lineHeight;t.font=l.string,t.strokeText(a,e,n+d/2+r),r+=d}),t.stroke()}function In(t,{x:e,y:n},o,{fonts:s,colors:r}){let a=0;o.forEach(function(i,l){const d=r[Math.min(l,r.length-1)],c=s[Math.min(l,s.length-1)],u=c.lineHeight;t.beginPath(),t.font=c.string,t.fillStyle=d,t.fillText(i,e,n+u/2+a),a+=u,t.fill()})}function jn(t,e){const n=We(t)?t:e;return We(n)?ce(n,0,1):1}const Ye={xScaleID:{min:"xMin",max:"xMax",start:"left",end:"right",startProp:"x",endProp:"x2"},yScaleID:{min:"yMin",max:"yMax",start:"bottom",end:"top",startProp:"y",endProp:"y2"}};function $(t,e,n){return e=typeof e=="number"?e:t.parse(e),lt(e)?t.getPixelForValue(e):n}function L(t,e,n){const o=e[n];if(o||n==="scaleID")return o;const s=n.charAt(0),r=Object.values(t).filter(a=>a.axis&&a.axis===s);return r.length?r[0].id:s}function mt(t,e){if(t){const n=t.options.reverse,o=$(t,e.min,n?e.end:e.start),s=$(t,e.max,n?e.start:e.end);return{start:o,end:s}}}function wt(t,e){const{chartArea:n,scales:o}=t,s=o[L(o,e,"xScaleID")],r=o[L(o,e,"yScaleID")];let a=n.width/2,i=n.height/2;return s&&(a=$(s,e.xValue,s.left+s.width/2)),r&&(i=$(r,e.yValue,r.top+r.height/2)),{x:a,y:i}}function De(t,e){const n=t.scales,o=n[L(n,e,"xScaleID")],s=n[L(n,e,"yScaleID")];if(!o&&!s)return{};let{left:r,right:a}=o||t.chartArea,{top:i,bottom:l}=s||t.chartArea;const d=Xe(o,{min:e.xMin,max:e.xMax,start:r,end:a});r=d.start,a=d.end;const c=Xe(s,{min:e.yMin,max:e.yMax,start:l,end:i});return i=c.start,l=c.end,{x:r,y:i,x2:a,y2:l,width:a-r,height:l-i,centerX:r+(a-r)/2,centerY:i+(l-i)/2}}function xt(t,e){if(!gt(e)){const n=De(t,e);let o=e.radius;(!o||isNaN(o))&&(o=Math.min(n.width,n.height)/2,e.radius=o);const s=o*2,r=n.centerX+e.xAdjust,a=n.centerY+e.yAdjust;return{x:r-o,y:a-o,x2:r+o,y2:a+o,centerX:r,centerY:a,width:s,height:s,radius:o}}return En(t,e)}function Tn(t,e){const{scales:n,chartArea:o}=t,s=n[e.scaleID],r={x:o.left,y:o.top,x2:o.right,y2:o.bottom};return s?On(s,r,e):Wn(n,r,e),r}function vt(t,e){const n=De(t,e);return n.initProperties=K(t,n,e),n.elements=[{type:"label",optionScope:"label",properties:Xn(t,n,e),initProperties:n.initProperties}],n}function En(t,e){const n=wt(t,e),o=e.radius*2;return{x:n.x-e.radius+e.xAdjust,y:n.y-e.radius+e.yAdjust,x2:n.x+e.radius+e.xAdjust,y2:n.y+e.radius+e.yAdjust,centerX:n.x+e.xAdjust,centerY:n.y+e.yAdjust,radius:e.radius,width:o,height:o}}function Xe(t,e){const n=mt(t,e)||e;return{start:Math.min(n.start,n.end),end:Math.max(n.start,n.end)}}function On(t,e,n){const o=$(t,n.value,NaN),s=$(t,n.endValue,o);t.isHorizontal()?(e.x=o,e.x2=s):(e.y=o,e.y2=s)}function Wn(t,e,n){for(const o of Object.keys(Ye)){const s=t[L(t,n,o)];if(s){const{min:r,max:a,start:i,end:l,startProp:d,endProp:c}=Ye[o],u=mt(s,{min:n[r],max:n[a],start:s[i],end:s[l]});e[d]=u.start,e[c]=u.end}}}function Ln({properties:t,options:e},n,o,s){const{x:r,x2:a,width:i}=t;return Ct({start:r,end:a,size:i,borderWidth:e.borderWidth},{position:o.x,padding:{start:s.left,end:s.right},adjust:e.label.xAdjust,size:n.width})}function Yn({properties:t,options:e},n,o,s){const{y:r,y2:a,height:i}=t;return Ct({start:r,end:a,size:i,borderWidth:e.borderWidth},{position:o.y,padding:{start:s.top,end:s.bottom},adjust:e.label.yAdjust,size:n.height})}function Ct(t,e){const{start:n,end:o,borderWidth:s}=t,{position:r,padding:{start:a,end:i},adjust:l}=e,d=o-s-n-a-i-e.size;return n+s/2+l+ke(d,r)}function Xn(t,e,n){const o=n.label;o.backgroundColor="transparent",o.callout.display=!1;const s=Me(o.position),r=le(o.padding),a=Ae(t.ctx,o),i=Ln({properties:e,options:n},a,s,r),l=Yn({properties:e,options:n},a,s,r),d=a.width+r.width,c=a.height+r.height;return{x:i,y:l,x2:i+d,y2:l+c,width:d,height:c,centerX:i+d/2,centerY:l+c/2,rotation:o.rotation}}function Y(t,e,n){const o=Math.cos(n),s=Math.sin(n),r=e.x,a=e.y;return{x:r+o*(t.x-r)-s*(t.y-a),y:a+s*(t.x-r)+o*(t.y-a)}}const pe=["enter","leave"],Re=pe.concat("click");function $n(t,e,n){e.listened=pt(n,Re,e.listeners),e.moveListened=!1,e._getElements=_e,pe.forEach(o=>{X(n[o])&&(e.moveListened=!0)}),(!e.listened||!e.moveListened)&&e.annotations.forEach(o=>{!e.listened&&X(o.click)&&(e.listened=!0),e.moveListened||pe.forEach(s=>{X(o[s])&&(e.listened=!0,e.moveListened=!0)})})}function Bn(t,e,n){if(t.listened)switch(e.type){case"mousemove":case"mouseout":return zn(t,e,n);case"click":return Hn(t,e,n)}}function zn(t,e,n){if(!t.moveListened)return;let o;e.type==="mousemove"?o=_e(t,e,n.interaction):o=[];const s=t.hovered;t.hovered=o;const r={state:t,event:e};let a=$e(r,"leave",s,o);return $e(r,"enter",o,s)||a}function $e({state:t,event:e},n,o,s){let r;for(const a of o)s.indexOf(a)<0&&(r=St(a.options[n]||t.listeners[n],a,e)||r);return r}function Hn(t,e,n){const o=t.listeners,s=_e(t,e,n.interaction);let r;for(const a of s)r=St(a.options.click||o.click,a,e)||r;return r}function St(t,e,n){return Ce(t,[e.$context,n])===!0}const ie=["afterDraw","beforeDraw"];function Nn(t,e,n){const o=e.visibleElements;e.hooked=pt(n,ie,e.hooks),e.hooked||o.forEach(s=>{e.hooked||ie.forEach(r=>{X(s.options[r])&&(e.hooked=!0)})})}function Be(t,e,n){if(t.hooked){const o=e.options[n]||t.hooks[n];return Ce(o,[e.$context])}}function Vn(t,e,n){const o=Gn(t.scales,e,n);let s=ze(e,o,"min","suggestedMin");s=ze(e,o,"max","suggestedMax")||s,s&&X(e.handleTickRangeOptions)&&e.handleTickRangeOptions()}function Fn(t,e){for(const n of t)qn(n,e)}function ze(t,e,n,o){if(lt(e[n])&&!Un(t.options,n,o)){const s=t[n]!==e[n];return t[n]=e[n],s}}function Un(t,e,n){return S(t[e])||S(t[n])}function qn(t,e){for(const n of["scaleID","xScaleID","yScaleID"]){const o=L(e,t,n);o&&!e[o]&&Jn(t,n)&&console.warn(`No scale found with id '${o}' for annotation '${t.id}'`)}}function Jn(t,e){if(e==="scaleID")return!0;const n=e.charAt(0);for(const o of["Min","Max","Value"])if(S(t[n+o]))return!0;return!1}function Gn(t,e,n){const o=e.axis,s=e.id,r=o+"ScaleID",a={min:J(e.min,Number.NEGATIVE_INFINITY),max:J(e.max,Number.POSITIVE_INFINITY)};for(const i of n)i.scaleID===s?He(i,e,["value","endValue"],a):L(t,i,r)===s&&He(i,e,[o+"Min",o+"Max",o+"Value"],a);return a}function He(t,e,n,o){for(const s of n){const r=t[s];if(S(r)){const a=e.parse(r);o.min=Math.min(o.min,a),o.max=Math.max(o.max,a)}}}class N extends B{inRange(e,n,o,s){const{x:r,y:a}=Y({x:e,y:n},this.getCenterPoint(s),_(-this.options.rotation));return ct({x:r,y:a},this.getProps(["x","y","x2","y2"],s),o,this.options.borderWidth)}getCenterPoint(e){return z(this,e)}draw(e){e.save(),Pe(e,this.getCenterPoint(),this.options.rotation),yt(e,this,this.options),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return vt(e,n)}}N.id="boxAnnotation";N.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:{backgroundColor:"transparent",borderWidth:0,callout:{display:!1},color:"black",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:void 0,textAlign:"start",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};N.defaultRoutes={borderColor:"color",backgroundColor:"color"};N.descriptors={label:{_fallback:!0}};const _t=["left","bottom","top","right"];class Q extends B{inRange(e,n,o,s){const{x:r,y:a}=Y({x:e,y:n},this.getCenterPoint(s),_(-this.rotation));return ct({x:r,y:a},this.getProps(["x","y","x2","y2"],s),o,this.options.borderWidth)}getCenterPoint(e){return z(this,e)}draw(e){const n=this.options,o=!S(this._visible)||this._visible;!n.display||!n.content||!o||(e.save(),Pe(e,this.getCenterPoint(),this.rotation),Qn(e,this),yt(e,this,n),kn(e,ro(this),n),e.restore())}resolveElementProperties(e,n){let o;if(gt(n))o=wt(e,n);else{const{centerX:i,centerY:l}=De(e,n);o={x:i,y:l}}const s=le(n.padding),r=Ae(e.ctx,n),a=Kn(o,r,n,s);return{initProperties:K(e,a,n),pointX:o.x,pointY:o.y,...a,rotation:n.rotation}}}Q.id="labelAnnotation";Q.defaults={adjustScaleRange:!0,backgroundColor:"transparent",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:0,borderShadowColor:"transparent",borderWidth:0,callout:{borderCapStyle:"butt",borderColor:void 0,borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:1,display:!1,margin:5,position:"auto",side:5,start:"50%"},color:"black",content:null,display:!0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:void 0},height:void 0,init:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};Q.defaultRoutes={borderColor:"color"};function Kn(t,e,n,o){const s=e.width+o.width+n.borderWidth,r=e.height+o.height+n.borderWidth,a=Me(n.position,"center"),i=Ne(t.x,s,n.xAdjust,a.x),l=Ne(t.y,r,n.yAdjust,a.y);return{x:i,y:l,x2:i+s,y2:l+r,width:s,height:r,centerX:i+s/2,centerY:l+r/2}}function Ne(t,e,n=0,o){return t-ke(e,o)+n}function Qn(t,e){const{pointX:n,pointY:o,options:s}=e,r=s.callout,a=r&&r.display&&oo(e,r);if(!a||ao(e,r,a))return;if(t.save(),t.beginPath(),!T(t,r))return t.restore();const{separatorStart:l,separatorEnd:d}=Zn(e,a),{sideStart:c,sideEnd:u}=to(e,a,l);(r.margin>0||s.borderWidth===0)&&(t.moveTo(l.x,l.y),t.lineTo(d.x,d.y)),t.moveTo(c.x,c.y),t.lineTo(u.x,u.y);const f=Y({x:n,y:o},e.getCenterPoint(),_(-e.rotation));t.lineTo(f.x,f.y),t.stroke(),t.restore()}function Zn(t,e){const{x:n,y:o,x2:s,y2:r}=t,a=eo(t,e);let i,l;return e==="left"||e==="right"?(i={x:n+a,y:o},l={x:i.x,y:r}):(i={x:n,y:o+a},l={x:s,y:i.y}),{separatorStart:i,separatorEnd:l}}function eo(t,e){const{width:n,height:o,options:s}=t,r=s.callout.margin+s.borderWidth/2;return e==="right"?n+r:e==="bottom"?o+r:-r}function to(t,e,n){const{y:o,width:s,height:r,options:a}=t,i=a.callout.start,l=no(e,a.callout);let d,c;return e==="left"||e==="right"?(d={x:n.x,y:o+j(r,i)},c={x:d.x+l,y:d.y}):(d={x:n.x+j(s,i),y:n.y},c={x:d.x,y:d.y+l}),{sideStart:d,sideEnd:c}}function no(t,e){const n=e.side;return t==="left"||t==="top"?-n:n}function oo(t,e){const n=e.position;return _t.includes(n)?n:so(t,e)}function so(t,e){const{x:n,y:o,x2:s,y2:r,width:a,height:i,pointX:l,pointY:d,centerX:c,centerY:u,rotation:f}=t,h={x:c,y:u},p=e.start,m=j(a,p),E=j(i,p),w=[n,n+m,n+m,s],b=[o+E,r,o,r],y=[];for(let x=0;x<4;x++){const M=Y({x:w[x],y:b[x]},h,_(f));y.push({position:_t[x],distance:Se(M,{x:l,y:d})})}return y.sort((x,M)=>x.distance-M.distance)[0].position}function ro({x:t,y:e,width:n,height:o,options:s}){const r=s.borderWidth/2,a=le(s.padding);return{x:t+a.left+r,y:e+a.top+r,width:n-a.left-a.right-s.borderWidth,height:o-a.top-a.bottom-s.borderWidth}}function ao(t,e,n){const{pointX:o,pointY:s}=t,r=e.margin;let a=o,i=s;return n==="left"?a+=r:n==="right"?a-=r:n==="top"?i+=r:n==="bottom"&&(i-=r),t.inRange(a,i)}const Ie=(t,e,n)=>({x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}),be=(t,e,n)=>Ie(e,n,Math.abs((t-e.y)/(n.y-e.y))).x,Ve=(t,e,n)=>Ie(e,n,Math.abs((t-e.x)/(n.x-e.x))).y,U=t=>t*t,io=(t,e,{x:n,y:o,x2:s,y2:r},a)=>a==="y"?{start:Math.min(o,r),end:Math.max(o,r),value:e}:{start:Math.min(n,s),end:Math.max(n,s),value:t},Fe=(t,e,n,o)=>(1-o)*(1-o)*t+2*(1-o)*o*e+o*o*n,ye=(t,e,n,o)=>({x:Fe(t.x,e.x,n.x,o),y:Fe(t.y,e.y,n.y,o)}),Ue=(t,e,n,o)=>2*(1-o)*(e-t)+2*o*(n-e),qe=(t,e,n,o)=>-Math.atan2(Ue(t.x,e.x,n.x,o),Ue(t.y,e.y,n.y,o))+.5*C;class Z extends B{inRange(e,n,o,s){const r=this.options.borderWidth/2;if(o!=="x"&&o!=="y"){const a={mouseX:e,mouseY:n},{path:i,ctx:l}=this;if(i){T(l,this.options);const{chart:c}=this.$context,u=e*c.currentDevicePixelRatio,f=n*c.currentDevicePixelRatio,h=l.isPointInStroke(i,u,f)||me(this,a,s);return l.restore(),h}const d=U(r);return fo(this,a,d,s)||me(this,a,s)}return lo(this,{mouseX:e,mouseY:n},o,{hBorderWidth:r,useFinalPosition:s})}getCenterPoint(e){return z(this,e)}draw(e){const{x:n,y:o,x2:s,y2:r,cp:a,options:i}=this;if(e.save(),!T(e,i))return e.restore();H(e,i);const l=Math.sqrt(Math.pow(s-n,2)+Math.pow(r-o,2));if(i.curve&&a)return xo(e,this,a,l),e.restore();const{startOpts:d,endOpts:c,startAdjust:u,endAdjust:f}=kt(this),h=Math.atan2(r-o,s-n);e.translate(n,o),e.rotate(h),e.beginPath(),e.moveTo(0+u,0),e.lineTo(l-f,0),e.shadowColor=i.borderShadowColor,e.stroke(),we(e,0,u,d),we(e,l,-f,c),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){const o=Tn(e,n),{x:s,y:r,x2:a,y2:i}=o,l=co(o,e.chartArea),d=l?uo({x:s,y:r},{x:a,y:i},e.chartArea):{x:s,y:r,x2:a,y2:i,width:Math.abs(a-s),height:Math.abs(i-r)};if(d.centerX=(a+s)/2,d.centerY=(i+r)/2,d.initProperties=K(e,d,n),n.curve){const u={x:d.x,y:d.y},f={x:d.x2,y:d.y2};d.cp=wo(d,n,Se(u,f))}const c=ho(e,d,n.label);return c._visible=l,d.elements=[{type:"label",optionScope:"label",properties:c,initProperties:d.initProperties}],d}}Z.id="lineAnnotation";const Je={backgroundColor:void 0,backgroundShadowColor:void 0,borderColor:void 0,borderDash:void 0,borderDashOffset:void 0,borderShadowColor:void 0,borderWidth:void 0,display:void 0,fill:void 0,length:void 0,shadowBlur:void 0,shadowOffsetX:void 0,shadowOffsetY:void 0,width:void 0};Z.defaults={adjustScaleRange:!0,arrowHeads:{display:!1,end:Object.assign({},Je),fill:!1,length:12,start:Object.assign({},Je),width:6},borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:2,curve:!1,controlPoint:{y:"-50%"},display:!0,endValue:void 0,init:void 0,label:{backgroundColor:"rgba(0,0,0,0.8)",backgroundShadowColor:"transparent",borderCapStyle:"butt",borderColor:"black",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderRadius:6,borderShadowColor:"transparent",borderWidth:0,callout:Object.assign({},Q.defaults.callout),color:"#fff",content:null,display:!1,drawTime:void 0,font:{family:void 0,lineHeight:void 0,size:void 0,style:void 0,weight:"bold"},height:void 0,opacity:void 0,padding:6,position:"center",rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,textAlign:"center",textStrokeColor:void 0,textStrokeWidth:0,width:void 0,xAdjust:0,yAdjust:0,z:void 0},scaleID:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,value:void 0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};Z.descriptors={arrowHeads:{start:{_fallback:!0},end:{_fallback:!0},_fallback:!0}};Z.defaultRoutes={borderColor:"color"};function lo(t,{mouseX:e,mouseY:n},o,{hBorderWidth:s,useFinalPosition:r}){const a=io(e,n,t.getProps(["x","y","x2","y2"],r),o);return a.value>=a.start-s&&a.value<=a.end+s||me(t,{mouseX:e,mouseY:n},r,o)}function co({x:t,y:e,x2:n,y2:o},{top:s,right:r,bottom:a,left:i}){return!(t<i&&n<i||t>r&&n>r||e<s&&o<s||e>a&&o>a)}function Ge({x:t,y:e},n,{top:o,right:s,bottom:r,left:a}){return t<a&&(e=Ve(a,{x:t,y:e},n),t=a),t>s&&(e=Ve(s,{x:t,y:e},n),t=s),e<o&&(t=be(o,{x:t,y:e},n),e=o),e>r&&(t=be(r,{x:t,y:e},n),e=r),{x:t,y:e}}function uo(t,e,n){const{x:o,y:s}=Ge(t,e,n),{x:r,y:a}=Ge(e,t,n);return{x:o,y:s,x2:r,y2:a,width:Math.abs(r-o),height:Math.abs(a-s)}}function fo(t,{mouseX:e,mouseY:n},o=O,s){const{x:r,y:a,x2:i,y2:l}=t.getProps(["x","y","x2","y2"],s),d=i-r,c=l-a,u=U(d)+U(c),f=u===0?-1:((e-r)*d+(n-a)*c)/u;let h,p;return f<0?(h=r,p=a):f>1?(h=i,p=l):(h=r+f*d,p=a+f*c),U(e-h)+U(n-p)<=o}function me(t,{mouseX:e,mouseY:n},o,s){const r=t.label;return r.options.display&&r.inRange(e,n,s,o)}function ho(t,e,n){const o=n.borderWidth,s=le(n.padding),r=Ae(t.ctx,n),a=r.width+s.width+o,i=r.height+s.height+o;return po(e,n,{width:a,height:i,padding:s},t.chartArea)}function go(t){const{x:e,y:n,x2:o,y2:s}=t,r=Math.atan2(s-n,o-e);return r>C/2?r-C:r<C/-2?r+C:r}function po(t,e,n,o){const{width:s,height:r,padding:a}=n,{xAdjust:i,yAdjust:l}=e,d={x:t.x,y:t.y},c={x:t.x2,y:t.y2},u=e.rotation==="auto"?go(t):_(e.rotation),f=bo(s,r,u),h=yo(t,e,{labelSize:f,padding:a},o),p=t.cp?ye(d,t.cp,c,h):Ie(d,c,h),m={size:f.w,min:o.left,max:o.right,padding:a.left},E={size:f.h,min:o.top,max:o.bottom,padding:a.top},w=Qe(p.x,m)+i,b=Qe(p.y,E)+l;return{x:w-s/2,y:b-r/2,x2:w+s/2,y2:b+r/2,centerX:w,centerY:b,pointX:p.x,pointY:p.y,width:s,height:r,rotation:Vt(u)}}function bo(t,e,n){const o=Math.cos(n),s=Math.sin(n);return{w:Math.abs(t*o)+Math.abs(e*s),h:Math.abs(t*s)+Math.abs(e*o)}}function yo(t,e,n,o){let s;const r=mo(t,o);return e.position==="start"?s=Ke({w:t.x2-t.x,h:t.y2-t.y},n,e,r):e.position==="end"?s=1-Ke({w:t.x-t.x2,h:t.y-t.y2},n,e,r):s=ke(1,e.position),s}function Ke(t,e,n,o){const{labelSize:s,padding:r}=e,a=t.w*o.dx,i=t.h*o.dy,l=a>0&&(s.w/2+r.left-o.x)/a,d=i>0&&(s.h/2+r.top-o.y)/i;return ce(Math.max(l,d),0,.25)}function mo(t,e){const{x:n,x2:o,y:s,y2:r}=t,a=Math.min(s,r)-e.top,i=Math.min(n,o)-e.left,l=e.bottom-Math.max(s,r),d=e.right-Math.max(n,o);return{x:Math.min(i,d),y:Math.min(a,l),dx:i<=d?1:-1,dy:a<=l?1:-1}}function Qe(t,e){const{size:n,min:o,max:s,padding:r}=e,a=n/2;return n>s-o?(s+o)/2:(o>=t-r-a&&(t=o+r+a),s<=t+r+a&&(t=s-r-a),t)}function kt(t){const e=t.options,n=e.arrowHeads&&e.arrowHeads.start,o=e.arrowHeads&&e.arrowHeads.end;return{startOpts:n,endOpts:o,startAdjust:Ze(t,n),endAdjust:Ze(t,o)}}function Ze(t,e){if(!e||!e.display)return 0;const{length:n,width:o}=e,s=t.options.borderWidth/2,r={x:n,y:o+s};return Math.abs(be(0,r,{x:0,y:s}))}function we(t,e,n,o){if(!o||!o.display)return;const{length:s,width:r,fill:a,backgroundColor:i,borderColor:l}=o,d=Math.abs(e-s)+n;t.beginPath(),H(t,o),T(t,o),t.moveTo(d,-r),t.lineTo(e+n,0),t.lineTo(d,r),a===!0?(t.fillStyle=i||l,t.closePath(),t.fill(),t.shadowColor="transparent"):t.shadowColor=o.borderShadowColor,t.stroke()}function wo(t,e,n){const{x:o,y:s,x2:r,y2:a,centerX:i,centerY:l}=t,d=Math.atan2(a-s,r-o),c=Me(e.controlPoint,0),u={x:i+j(n,c.x,!1),y:l+j(n,c.y,!1)};return Y(u,{x:i,y:l},d)}function et(t,{x:e,y:n},{angle:o,adjust:s},r){!r||!r.display||(t.save(),t.translate(e,n),t.rotate(o),we(t,0,-s,r),t.restore())}function xo(t,e,n,o){const{x:s,y:r,x2:a,y2:i,options:l}=e,{startOpts:d,endOpts:c,startAdjust:u,endAdjust:f}=kt(e),h={x:s,y:r},p={x:a,y:i},m=qe(h,n,p,0),E=qe(h,n,p,1)-C,w=ye(h,n,p,u/o),b=ye(h,n,p,1-f/o),y=new Path2D;t.beginPath(),y.moveTo(w.x,w.y),y.quadraticCurveTo(n.x,n.y,b.x,b.y),t.shadowColor=l.borderShadowColor,t.stroke(y),e.path=y,e.ctx=t,et(t,w,{angle:m,adjust:u},d),et(t,b,{angle:E,adjust:f},c)}class ee extends B{inRange(e,n,o,s){const r=this.options.rotation,a=this.options.borderWidth;if(o!=="x"&&o!=="y")return vo({x:e,y:n},this.getProps(["width","height","centerX","centerY"],s),r,a);const{x:i,y:l,x2:d,y2:c}=this.getProps(["x","y","x2","y2"],s),u=a/2,f=o==="y"?{start:l,end:c}:{start:i,end:d},h=Y({x:e,y:n},this.getCenterPoint(s),_(-r));return h[o]>=f.start-u-O&&h[o]<=f.end+u+O}getCenterPoint(e){return z(this,e)}draw(e){const{width:n,height:o,centerX:s,centerY:r,options:a}=this;e.save(),Pe(e,this.getCenterPoint(),a.rotation),H(e,this.options),e.beginPath(),e.fillStyle=a.backgroundColor;const i=T(e,a);e.ellipse(s,r,o/2,n/2,C/2,0,2*C),e.fill(),i&&(e.shadowColor=a.borderShadowColor,e.stroke()),e.restore()}get label(){return this.elements&&this.elements[0]}resolveElementProperties(e,n){return vt(e,n)}}ee.id="ellipseAnnotation";ee.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,label:Object.assign({},N.defaults.label),rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xMax:void 0,xMin:void 0,xScaleID:void 0,yMax:void 0,yMin:void 0,yScaleID:void 0,z:0};ee.defaultRoutes={borderColor:"color",backgroundColor:"color"};ee.descriptors={label:{_fallback:!0}};function vo(t,e,n,o){const{width:s,height:r,centerX:a,centerY:i}=e,l=s/2,d=r/2;if(l<=0||d<=0)return!1;const c=_(n||0),u=o/2||0,f=Math.cos(c),h=Math.sin(c),p=Math.pow(f*(t.x-a)+h*(t.y-i),2),m=Math.pow(h*(t.x-a)-f*(t.y-i),2);return p/Math.pow(l+u,2)+m/Math.pow(d+u,2)<=1.0001}class fe extends B{inRange(e,n,o,s){const{x:r,y:a,x2:i,y2:l,width:d}=this.getProps(["x","y","x2","y2","width"],s),c=this.options.borderWidth;if(o!=="x"&&o!=="y")return mn({x:e,y:n},this.getCenterPoint(s),d/2,c);const u=c/2,f=o==="y"?{start:a,end:l,value:n}:{start:r,end:i,value:e};return f.value>=f.start-u&&f.value<=f.end+u}getCenterPoint(e){return z(this,e)}draw(e){const n=this.options,o=n.borderWidth;if(n.radius<.1)return;e.save(),e.fillStyle=n.backgroundColor,H(e,n);const s=T(e,n);Pn(e,this,this.centerX,this.centerY),s&&!ue(n.pointStyle)&&(e.shadowColor=n.borderShadowColor,e.stroke()),e.restore(),n.borderWidth=o}resolveElementProperties(e,n){const o=xt(e,n);return o.initProperties=K(e,o,n),o}}fe.id="pointAnnotation";fe.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderDash:[],borderDashOffset:0,borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,pointStyle:"circle",radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};fe.defaultRoutes={borderColor:"color",backgroundColor:"color"};class he extends B{inRange(e,n,o,s){if(o!=="x"&&o!=="y")return this.options.radius>=.1&&this.elements.length>1&&So(this.elements,e,n,s);const r=Y({x:e,y:n},this.getCenterPoint(s),_(-this.options.rotation)),a=this.elements.map(d=>o==="y"?d.bY:d.bX),i=Math.min(...a),l=Math.max(...a);return r[o]>=i&&r[o]<=l}getCenterPoint(e){return z(this,e)}draw(e){const{elements:n,options:o}=this;e.save(),e.beginPath(),e.fillStyle=o.backgroundColor,H(e,o);const s=T(e,o);let r=!0;for(const a of n)r?(e.moveTo(a.x,a.y),r=!1):e.lineTo(a.x,a.y);e.closePath(),e.fill(),s&&(e.shadowColor=o.borderShadowColor,e.stroke()),e.restore()}resolveElementProperties(e,n){const o=xt(e,n),{sides:s,rotation:r}=n,a=[],i=2*C/s;let l=r*dt;for(let d=0;d<s;d++,l+=i){const c=Co(o,n,l);c.initProperties=K(e,o,n),a.push(c)}return o.elements=a,o}}he.id="polygonAnnotation";he.defaults={adjustScaleRange:!0,backgroundShadowColor:"transparent",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderShadowColor:"transparent",borderWidth:1,display:!0,init:void 0,point:{radius:0},radius:10,rotation:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,sides:3,xAdjust:0,xMax:void 0,xMin:void 0,xScaleID:void 0,xValue:void 0,yAdjust:0,yMax:void 0,yMin:void 0,yScaleID:void 0,yValue:void 0,z:0};he.defaultRoutes={borderColor:"color",backgroundColor:"color"};function Co({centerX:t,centerY:e},{radius:n,borderWidth:o},s){const r=o/2,a=Math.sin(s),i=Math.cos(s),l={x:t+a*n,y:e-i*n};return{type:"point",optionScope:"point",properties:{x:l.x,y:l.y,centerX:l.x,centerY:l.y,bX:t+a*(n+r),bY:e-i*(n+r)}}}function So(t,e,n,o){let s=!1,r=t[t.length-1].getProps(["bX","bY"],o);for(const a of t){const i=a.getProps(["bX","bY"],o);i.bY>n!=r.bY>n&&e<(r.bX-i.bX)*(n-i.bY)/(r.bY-i.bY)+i.bX&&(s=!s),r=i}return s}const I={box:N,ellipse:ee,label:Q,line:Z,point:fe,polygon:he};Object.keys(I).forEach(t=>{zt.describe(`elements.${I[t].id}`,{_fallback:"plugins.annotation.common"})});const _o={update:Object.assign},ko=Re.concat(ie),tt=(t,e)=>G(e)?ve(t,e):t,xe=t=>t==="color"||t==="font";function je(t="line"){return I[t]?t:(console.warn(`Unknown annotation type: '${t}', defaulting to 'line'`),"line")}function Mo(t,e,n,o){const s=Ao(t,n.animations,o),r=e.annotations,a=Io(e.elements,r);for(let i=0;i<r.length;i++){const l=r[i],d=Mt(a,i,l.type),c=l.setContext(Ro(t,d,l)),u=d.resolveElementProperties(t,c);u.skip=Po(u),"elements"in u&&(Do(d,u.elements,c,s),delete u.elements),S(d.x)||Object.assign(d,u),Object.assign(d,u.initProperties),u.options=Pt(c),s.update(d,u)}}function Po(t){return isNaN(t.x)||isNaN(t.y)}function Ao(t,e,n){return n==="reset"||n==="none"||n==="resize"?_o:new Ft(t,e)}function Do(t,e,n,o){const s=t.elements||(t.elements=[]);s.length=e.length;for(let r=0;r<e.length;r++){const a=e[r],i=a.properties,l=Mt(s,r,a.type,a.initProperties),d=n[a.optionScope].override(a);i.options=Pt(d),o.update(l,i)}}function Mt(t,e,n,o){const s=I[je(n)];let r=t[e];return(!r||!(r instanceof s))&&(r=t[e]=new s,Object.assign(r,o)),r}function Pt(t){const e=I[je(t.type)],n={};n.id=t.id,n.type=t.type,n.drawTime=t.drawTime,Object.assign(n,ve(t,e.defaults),ve(t,e.defaultRoutes));for(const o of ko)n[o]=t[o];return n}function ve(t,e){const n={};for(const o of Object.keys(e)){const s=e[o],r=t[o];xe(o)&&W(r)?n[o]=r.map(a=>tt(a,s)):n[o]=tt(r,s)}return n}function Ro(t,e,n){return e.$context||(e.$context=Object.assign(Object.create(t.getContext()),{element:e,id:n.id,type:"annotation"}))}function Io(t,e){const n=e.length,o=t.length;if(o<n){const s=n-o;t.splice(o,0,...new Array(s))}else o>n&&t.splice(n,o-n);return t}var jo="3.0.1";const R=new Map,To=Re.concat(ie);var Eo={id:"annotation",version:jo,beforeRegister(){wn("chart.js","4.0",q.version)},afterRegister(){q.register(I)},afterUnregister(){q.unregister(I)},beforeInit(t){R.set(t,{annotations:[],elements:[],visibleElements:[],listeners:{},listened:!1,moveListened:!1,hooks:{},hooked:!1,hovered:[]})},beforeUpdate(t,e,n){const o=R.get(t),s=o.annotations=[];let r=n.annotations;G(r)?Object.keys(r).forEach(a=>{const i=r[a];G(i)&&(i.id=a,s.push(i))}):W(r)&&s.push(...r),Fn(s,t.scales)},afterDataLimits(t,e){const n=R.get(t);Vn(t,e.scale,n.annotations.filter(o=>o.display&&o.adjustScaleRange))},afterUpdate(t,e,n){const o=R.get(t);$n(t,o,n),Mo(t,o,n,e.mode),o.visibleElements=o.elements.filter(s=>!s.skip&&s.options.display),Nn(t,o,n)},beforeDatasetsDraw(t,e,n){se(t,"beforeDatasetsDraw",n.clip)},afterDatasetsDraw(t,e,n){se(t,"afterDatasetsDraw",n.clip)},beforeDraw(t,e,n){se(t,"beforeDraw",n.clip)},afterDraw(t,e,n){se(t,"afterDraw",n.clip)},beforeEvent(t,e,n){const o=R.get(t);Bn(o,e.event,n)&&(e.changed=!0)},afterDestroy(t){R.delete(t)},_getState(t){return R.get(t)},defaults:{animations:{numbers:{properties:["x","y","x2","y2","width","height","centerX","centerY","pointX","pointY","radius"],type:"number"}},clip:!0,interaction:{mode:void 0,axis:void 0,intersect:void 0},common:{drawTime:"afterDatasetsDraw",init:!1,label:{}}},descriptors:{_indexable:!1,_scriptable:t=>!To.includes(t)&&t!=="init",annotations:{_allKeys:!1,_fallback:(t,e)=>`elements.${I[je(e.type)].id}`},interaction:{_fallback:!0},common:{label:{_indexable:xe,_fallback:!0},_indexable:xe}},additionalOptionScopes:[""]};function se(t,e,n){const{ctx:o,chartArea:s}=t,r=R.get(t);n&&Ht(o,s);const a=Oo(r.visibleElements,e).sort((i,l)=>i.element.options.z-l.element.options.z);for(const i of a)Wo(o,s,r,i);n&&Nt(o)}function Oo(t,e){const n=[];for(const o of t)if(o.options.drawTime===e&&n.push({element:o,main:!0}),o.elements&&o.elements.length)for(const s of o.elements)s.options.display&&s.options.drawTime===e&&n.push({element:s});return n}function Wo(t,e,n,o){const s=o.element;o.main?(Be(n,s,"beforeDraw"),s.draw(t,e),Be(n,s,"afterDraw")):s.draw(t,e)}const At=t=>(rt("data-v-83d0c4b4"),t=t(),at(),t),Lo={key:0,class:"w-[80%] h-full bg-white rounded-[10px] py-[10px] pl-[30px] pr-[20px] relative"},Yo=At(()=>g("img",{src:un,alt:"happy",class:"absolute top-[10px] left-[10px] w-[20px]"},null,-1)),Xo=At(()=>g("img",{src:fn,alt:"sad",class:"absolute bottom-[10px] left-[10px] w-[20px]"},null,-1)),$o=nt({__name:"LineChart",props:{data:{}},setup(t){const e=t,n=v(null);let o=null;const s={type:"line",data:{labels:["1월","2월","3월","4월","5월","6월","7월","8월","9월","10월","11월","12월"],datasets:[{data:e.data,borderColor:"#855CF8",backgroundColor:"rgba(91, 60, 255, 0.2)",pointBackgroundColor:"#855CF8",pointBorderColor:"#fff",pointRadius:6,pointHoverRadius:7,borderWidth:1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1},scales:{x:{grid:{display:!1},ticks:{color:"#855CF8"}},y:{suggestedMin:-31,suggestedMax:100,grid:{display:!1},ticks:{callback:r=>r===0?"0":"",color:"black"}}},plugins:{legend:{display:!1},tooltip:{backgroundColor:"#855CF8",callbacks:{label:r=>`${r.raw}점`,title:()=>""},displayColors:!1,yAlign:"bottom"},annotation:{annotations:{yLine:{type:"line",scaleID:"y",value:"0",borderWidth:1,label:{content:"y = 0",enabled:!0,position:"end"}}}}}}};return ot(()=>{q.register(...Gt,Eo),o=new q(n.value,s)}),st(()=>e.data,r=>{o.data.datasets[0].data=r,o==null||o.update()},{deep:!0}),(r,a)=>e.data?(D(),A("div",Lo,[g("canvas",{ref_key:"chartCanvas",ref:n},null,512),Yo,Xo])):F("",!0)}}),Bo=it($o,[["__scopeId","data-v-83d0c4b4"]]),k=t=>(rt("data-v-255d0ae9"),t=t(),at(),t),zo={class:"flex flex-col gap-[30px]"},Ho={class:"w-full flex items-end justify-between"},No=k(()=>g("h1",{class:"text-4xl-bold mb-[10px]"},"월간 리포트",-1)),Vo={key:0},Fo=k(()=>g("p",{class:"text-lg-bold text-[#888888]"}," 해당 달에 일기를 작성하지 않았기 때문에 리포트를 생성할 수 없습니다. ",-1)),Uo=[Fo],qo={key:1},Jo=k(()=>g("p",{class:"text-lg-bold text-[#888888]"}," 아직 해당 달이 지나지 않았기 때문에 리포트를 생성할 수 없습니다. ",-1)),Go=[Jo],Ko={key:2,class:"w-full h-full flex items-center justify-center"},Qo=k(()=>g("p",{class:"text-lg-bold text-[#888888] animate-bounce"},"분석 중 입니다...",-1)),Zo=[Qo],es={key:3,class:"flex flex-col gap-[30px]"},ts={class:"flex gap-[20px] h-[300px]"},ns={class:"w-[35%] boxs gap-[10px]"},os={class:"text-lg-bold"},ss=k(()=>g("p",{class:"text-[#607D8B]"},"어떤 감정을 느꼈는 지 한 눈에 확인하세요!",-1)),rs={class:"h-full flex flex-col justify-between"},as=["src"],is={class:"w-full"},ls={class:"text-[#e6afb9]"},ds={class:"w-full boxs2 justify-between"},cs=k(()=>g("label",{class:"text-lg-bold"},"아무개 님의 2024년 6월달 감정을 분석했어요",-1)),us={class:"w-full h-[80%] flex gap-[20px]"},fs=Ot('<div class="flex flex-col gap-[10px] justify-end" data-v-255d0ae9><div class="flex items-center gap-[5px]" data-v-255d0ae9><div class="text-center w-[45px] rounded-[40px] bg-white text-sm-semibold text-[#E9ACAC]" data-v-255d0ae9> + 1 </div><img class="w-[20px]" src="'+Kt+'" alt="Happy" data-v-255d0ae9><img class="w-[20px]" src="'+Qt+'" alt="Proud" data-v-255d0ae9><img class="w-[20px]" src="'+Zt+'" alt="Excited" data-v-255d0ae9><img class="w-[20px]" src="'+en+'" alt="Grateful" data-v-255d0ae9></div><div class="flex items-center gap-[5px]" data-v-255d0ae9><div class="text-center w-[45px] rounded-[40px] bg-white text-sm-semibold text-[#E9ACAC]" data-v-255d0ae9> 0 </div><img class="w-[20px]" src="'+tn+'" alt="IDK" data-v-255d0ae9></div><div class="flex items-center gap-[5px]" data-v-255d0ae9><div class="text-center w-[45px] rounded-[40px] bg-white text-sm-semibold text-[#E9ACAC]" data-v-255d0ae9> - 1 </div><img class="w-[20px]" src="'+nn+'" alt="Sad" data-v-255d0ae9><img class="w-[20px]" src="'+on+'" alt="Angry" data-v-255d0ae9><img class="w-[20px]" src="'+sn+'" alt="Panicked" data-v-255d0ae9><img class="w-[20px]" src="'+rn+'" alt="Exhausted" data-v-255d0ae9></div></div>',1),hs=k(()=>g("p",{class:"text-sm-light"},"*사용자 기록을 점수로 변환하여 누적 합산한 결과입니다.",-1)),gs={class:"boxs w-full text-black gap-[10px]"},ps=k(()=>g("p",{class:"w-full text-end"},"From. Mood Tracker",-1)),bs={class:"w-full flex justify-end"},ys=k(()=>g("button",{class:"text-[#855CF8] border-b-[1.5px] border-[#855CF8]"}," Calendar로 돌아가기 ",-1)),ms=nt({__name:"ReportView",setup(t){const e=Wt(),n=Lt(),{addToast:o}=It(),s=v(null),r=v(!0),a=v(!1),i=v(!1),l=v(null),d=v([]),c=v([]),u=e.params.id,f=v(),h=v(),p=v({name:"",email:""});ot(async()=>{f.value=u.split("-")[0],h.value=u.split("-")[1],await Te.checkLogin()||(o({message:"로그인이 필요합니다."}),n.push("/login"));const y=await Te.getInformation();y||(o({message:"사용자 정보를 불러오는데 실패했습니다."}),n.push("/login")),p.value=y,await m()}),st([f,h],async()=>{await m()},{deep:!0});const m=async()=>{const b=new Date,y=b.getFullYear(),x=b.getMonth()+1;if(+f.value>y||+f.value===y&&+h.value>=x){a.value=!0;return}else{if(a.value=!1,i.value=await ne.checkReport(p.value.name,`${f.value}-${h.value}`),!i.value)return;l.value=await ne.getReport(p.value.name,`${f.value}-${h.value}`),c.value=await ne.getMonthScore(p.value.name,`${f.value}-${h.value}`),d.value=await $t.getEmotionCount(p.value.name,`${f.value}-${h.value}`),l.value?r.value=!0:(r.value=!1,await E())}},E=async()=>{s.value=new Bt(w);const b=`###프롬프트###
다음은 감정 기록 앱 사용자의 월간 통계입니다. 당신은 반드시 '사용자'가 '선택한 감정'의 통계 결과를 바탕으로, 사용자에게 맞춤형 피드백을 작성해야 합니다.
피드백:
###데이터###
* 사용자 이름: ${p.value.name}
* value.emotion.this.month.sum: ${c.value[+h.value]}
* value.emotion.last.month.sum: ${c.value[+h.value-1]}
###데이터 설명###
* value.emotion.this.month.sum과 value.emotion.last.month는 아래 값들로 이루어진 합산 결과 입니다.
*value.emotion.positive(+1): happy, grateful, proud, excited
* value.emotion.neutral(0): IDK
* value.emotion.negative(-1): sad, angry, panicked, exhausted
* 값이 0인 경우에는 IDK만 있거나, positive와 negative가 동일하게 존재하는 경우입니다.
###피드백 작성 지침###
think step by step
1. **결과 분석:**
   * 매월 1일부터 마지막 일까지 모든 value.emotion을 합산하여 value.emotion.this.sum를 계산합니다.
2. **이전 월과 비교**
   * 지난 달(value.emotion.last.month)과 이번 달(value.emotion.this.month)의 값을 비교합니다.
3. **감정 분석:**
   * sum.value.emotion의 중간값이 0임을 고려하여 이번 달에 대한 피드백을 제공합니다.
   * 동일한 감정에 대해서도 다양한 표현 방식을 사용하여 피드백의 지루함을 해소합니다.
   * 예시: '힘든 시간을 보내고 있지만', '혼란스러운 감정이 드는군요', '마음이 복잡한 하루였네요' 등
4. **추가적인 제안:**
   * 사용자의 감정 상태에 따라 전문적인 감정 돌봄에 대한 제안을 진행합니다. (예: '명상을 해보는 것은 어떨까요?', '좋아하는 음악을 들어보세요')
5. **형식:**
   * 존댓말을 사용하여 친근하고 공감적인 어투로 작성합니다.
   * 최대 글자 수는 1000자를 넘지 않도록 합니다.
###예상되는 피드백 예시###
예시 1: 긍정적인 변화 (큰 폭)
사용자 이름: 희망
* value.emotion.this.month.sum: +20
* value.emotion.last.month.sum: -5
희망님, 이번 달은 정말 밝은 빛이 가득했네요! 긍정적인 감정이 폭발적으로 증가했어요. 기분 좋은 일이 많았던 걸까요? 아니면, 스스로를 더욱 긍정적으로 바라보는 노력을 했던 걸까요? 어떤 이유에서든, 지금처럼 긍정적인 에너지를 유지한다면 앞으로 더욱 행복한 날들이 많아질 거예요. 혹시 긍정적인 감정을 유지하는 자신만의 비법이 있다면, 다른 사용자들과도 나눠주세요!
예시 2: 부정적인 변화 (작은 폭)
사용자 이름: 힘내
* value.emotion.this.month.sum: -3
* value.emotion.last.month.sum: 0
힘내님, 이번 달에는 조금 힘든 시간을 보내셨나 봐요. 하지만 걱정하지 마세요. 누구에게나 어려운 시기는 찾아오는 법이니까요. 좋아하는 음악을 들으며 잠시 휴식을 취하거나, 가벼운 운동을 해보는 건 어떠세요? 작은 변화부터 시작해보세요. 힘내님은 충분히 이겨낼 수 있어요.
예시 3: 큰 변화 없음
사용자 이름: 꾸준함
* value.emotion.this.month.sum: 0
* value.emotion.last.month.sum: -1
꾸준함님, 이번 달에는 감정적으로 큰 변화는 없었지만, 꾸준히 감정을 기록하고 있다는 것 자체가 대단한 일이에요. 어쩌면 지금 꾸준함님에게는 변화보다는 안정이 필요한 시기일 수도 있어요. 자신을 돌아보고, 현재에 집중하는 시간을 가져보는 건 어떨까요? 명상이나 요가를 통해 마음의 평화를 찾아보세요.
예시 4: 큰 폭으로 부정적인 변화
사용자 이름: 힘들어
* value.emotion.this.month.sum: -25
* value.emotion.last.month.sum: +5
힘들어님, 이번 달에는 유독 힘든 시간을 보내셨나 봐요. 감정 점수가 크게 떨어져 마음이 많이 무겁겠어요. 혹시 무슨 일이 있었는지 말하고 싶으시다면 언제든지 털어놓으셔도 돼요. 혼자 끙끙 앓기보다는 주변 사람들에게 도움을 요청하거나, 전문가의 상담을 받아보는 것도 좋은 방법이에요. 작은 변화부터 시작해도 괜찮아요. 힘들어님은 충분히 이겨낼 수 있습니다.
###참고###
위 예시는 일부분이며, 실제 피드백은 사용자의 데이터에 따라 더욱 다양하고 맞춤형으로 생성될 수 있습니다.
###추가적으로 고려해야 할 사항###
* **감정의 복잡성:** 감정은 단순히 숫자로 표현될 수 없는 복잡한 개념입니다. 앱에서 제공하는 피드백은 참고용이며, 전문적인 상담이 필요한 경우에는 전문가에게 도움을 받는 것이 좋습니다.
* **개인정보 보호:** 사용자의 개인정보를 보호하기 위해 민감한 정보는 노출하지 않도록 주의해야 합니다.
* `;console.log(b),s.value.generate(b)},w=async b=>{l.value=b;const y={reportedMonth:`${f.value}-${h.value}`,monthlyFeedback:b};await ne.createReport(y),setTimeout(async()=>{await m()},1e3)};return(b,y)=>{const x=Yt("RouterLink");return D(),A("div",zo,[g("section",Ho,[g("div",null,[No,g("p",null,P(f.value)+"년 "+P(h.value)+"월달의 감정 변화를 분석했어요. 나의 감정 패턴을 이해하고 되새겨보는 시간을 가져보세요. ",1)])]),i.value?F("",!0):(D(),A("section",Vo,Uo)),i.value&&a.value?(D(),A("section",qo,Go)):F("",!0),!a.value&&!r.value&&i.value?(D(),A("section",Ko,Zo)):F("",!0),!a.value&&r.value&&i.value?(D(),A("section",es,[g("article",ts,[g("div",ns,[g("label",os,P(f.value)+"년 "+P(h.value)+"월 감정 순위",1),ss,g("div",rs,[(D(!0),A(jt,null,Tt(d.value,(M,Dt)=>(D(),A("div",{key:Dt,class:"flex items-center gap-[10px]"},[g("img",{class:"w-[40px]",src:"/icons/emotions/"+M.emotion+".svg",alt:"emotion"},null,8,as),g("div",is,[g("div",{class:"bg-[#e6afb9] h-[20px] rounded-r-[10px] mt-[5px]",style:Xt({width:M.count/30*100+"%"})},null,4),g("p",ls,P(M.emotion)+"/"+P(M.count)+"회",1)])]))),128))])]),g("div",ds,[cs,g("div",us,[Ee(Bo,{data:c.value},null,8,["data"]),fs]),hs])]),g("article",gs,[g("p",null,"To. "+P(p.value.name),1),g("pre",null,P(l.value),1),ps])])):F("",!0),g("div",bs,[Ee(x,{to:"/calendar"},{default:Et(()=>[ys]),_:1})])])}}}),Ss=it(ms,[["__scopeId","data-v-255d0ae9"]]);export{Ss as default};
