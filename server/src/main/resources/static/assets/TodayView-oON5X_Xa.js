import{d as V,u as A,r as m,m as M,a as y,q as j,c,e,F as G,x as U,s as p,t as h,B as b,C as w,n as L,h as i,z as N,p as z,j as H,i as k,_ as K}from"./index-DKopnlJM.js";import{G as O}from"./gemini-DwKNDCid.js";import{d as $}from"./diary-Br-T5fo9.js";import{c as R}from"./calendar-CQyt3D4Z.js";const W="/images/stamp.svg",Y="/icons/loading.svg",_=v=>(z("data-v-a40b45cf"),v=v(),H(),v),q={class:"flex items-center justify-between"},Q={key:0,class:"diary-container px-[30px] py-[60px] w-[35%] fade-in"},J=_(()=>e("h1",{class:"text-4xl-bold mb-[30px] text-[#222222]"},"오늘의 감정",-1)),X={class:"grid grid-cols-3"},Z=["onClick"],ee=["src"],te=_(()=>e("article",null,null,-1)),se={key:1,class:"w-[60%] fade-in relative"},ae={class:"diary-container px-[40px] py-[30px]"},oe={class:"w-full flex items-end justify-between text-[#484848]"},ne={class:"flex flex-col gap-[20px]"},le={class:"text-lg-bold"},ce=_(()=>e("p",{class:"text-lg-regular"},[k(" 오늘은 어떤 하루를 보내셨나요? "),e("br"),k(" 하루를 기록해보세요! ")],-1)),ie={class:"bg-white p-[20px] rounded-[20px] shadow-md flex items-center gap-[20px]"},de=["src"],re={class:"relative w-full"},ue=["disable"],me={class:"absolute bottom-[10px] right-[10px] text-[#5B5B5B] text-sm-light"},pe={key:0,class:"absolute top-[-80px] right-[-50px]"},_e=_(()=>e("img",{src:W,alt:"diary",class:"w-[200px]"},null,-1)),ve=[_e],he={key:0,class:"flex justify-end mt-[20px]"},xe=["disabled"],fe={key:0,src:Y,class:"w-[30px] animate-spin"},ge={key:1},ye={key:2,class:"diary-container px-[40px] py-[30px] w-[35%] fade-in text-[#434343]"},be={class:"w-full"},we={class:"text-lg-regular"},ke=_(()=>e("div",{class:"w-full text-end"},[e("p",{class:"text-lg-regular"},"From. Mood Tracker")],-1)),$e=V({__name:"TodayView",setup(v){const D=L(),{addToast:S}=A(),C=["Happy","Angry","Sad","Proud","IDK","Excited","Panicked","Grateful","Exhausted"],a=m(null),t=m({emotion:"",content:"",feedback:""}),x=m(null),u=m(!1),r=m(!1);M(async()=>{var n,o;if(await y.checkLogin()||(S({message:"로그인이 필요합니다."}),D.push("/login")),a.value=await y.getInformation(),await $.hasDiary((n=a.value)==null?void 0:n.name,f())){r.value=!0;const d=await R.getDiary((o=a.value)==null?void 0:o.name,f());d&&(t.value.emotion=d.emotion,t.value.content=d.content,t.value.feedback=d.feedback)}else x.value=new O(E)}),j(()=>t.value.content,s=>{s.length>1e3&&(t.value.content=s.slice(0,1e3))});const B=()=>{const s=new Date,l=["일요일","월요일","화요일","수요일","목요일","금요일","토요일"],n=s.getFullYear(),o=s.getMonth()+1,d=s.getDate(),g=l[s.getDay()];return`${n}년 ${o}월 ${d}일 ${g}`},f=()=>{const s=new Date,l=s.getFullYear(),n=s.getMonth()+1,o=s.getDate();return`${l}-${n}-${o}`},I=s=>{t.value.emotion=s},T=()=>{u.value||(u.value=!0,F())},E=s=>{t.value.feedback=s,P()},F=()=>{const s=`사용자가 하루 동안 기록한 감정을 기반으로 따뜻하고 공감어린 피드백을 작성해줘. 감정에 따라 아래와 같은 피드백을 출력해줘. 각 피드백은 사용자의 감정과 일기 내용을 바탕으로 특별하고 맞춤형으로 작성되어야 해.

사용자 정보:
- 사용자 이름: ${a.value.name}
- 일기의 내용: ${t.value.content}
- 선택한 감정: ${t.value.emotion}

감정에 따른 피드백 예시:

- Happy: "${a.value.name}, 오늘 정말 기쁜 하루를 보낸 것 같아 기뻐요! 당신의 긍정적인 에너지가 당신의 일기를 통해 전해졌어요. 오늘 하루도 너무 수고 많았고, 내일도 이 기운 그대로 멋진 하루가 될 거예요!"

- Angry: "${a.value.name}, 오늘 화가 나는 일이 있었군요. 당신의 일기를 읽으니 당신의 감정을 충분히 이해할 수 있어요. 때로는 화를 내는 것도 필요해요. 내일은 더 나은 날이 될 거예요. 당신을 항상 응원하고 있어요."

- Sad: "${a.value.name}, 오늘 슬픈 일이 있었군요. 당신의 일기를 통해 당신의 마음이 느껴져요. 슬픔도 우리가 느껴야 할 중요한 감정이에요. 충분히 쉬고, 당신이 소중한 존재라는 걸 잊지 마세요. 내일은 더 나은 날이 될 거예요."

- Exhausted: "${a.value.name}, 오늘 많이 피곤했나 봐요. 당신의 일기를 읽으니 정말 힘든 하루를 보낸 것 같아요. 충분히 쉬어야 해요. 당신의 건강이 가장 중요해요. 내일은 더 활기찬 하루가 되길 바랄게요."

- Panicked: "${a.value.name}, 오늘 두려움을 느낀 일이 있었군요. 당신의 일기를 보니 얼마나 힘들었을지 이해가 돼요. 두려움은 우리를 성장하게 하는 감정이에요. 당신이 이겨낼 수 있다는 걸 믿어요. 내일은 더 안정된 하루가 될 거예요."

- IDK: "${a.value.name}, 오늘 무기력한 하루를 보냈군요. 당신의 일기를 보니 모든 것이 귀찮게 느껴졌겠어요. 누구나 가끔은 이렇게 느낄 때가 있어요. 충분히 쉬고, 자신을 돌봐주세요. 내일은 더 활기찬 하루가 되길 바라요."

- Blue: "${a.value.name}, 오늘 우울한 기분이었군요. 당신의 일기를 통해 당신의 마음이 느껴져요. 우울함도 우리가 겪는 중요한 감정이에요. 충분히 쉬고, 자신을 잘 돌봐주세요. 내일은 더 나은 날이 되길 바랄게요."

- Upset: "${a.value.name}, 오늘 속상한 일이 있었군요. 당신의 일기를 보니 얼마나 마음이 아팠을지 이해가 돼요. 속상함을 느끼는 것도 중요해요. 충분히 쉬고, 자신을 잘 돌봐주세요. 내일은 더 나은 날이 될 거예요."

- Peaceful: "${a.value.name}, 오늘 평온한 하루를 보낸 것 같아 기뻐요. 당신의 일기를 읽으니 당신의 마음이 안정된 것 같아 좋네요. 평온한 하루를 보낸 만큼 내일도 이렇게 평온하길 바랄게요."

사용자가 선택한 감정에 따라 예시보다 좀 더 자세한 적절한 피드백을 보내줘`;x.value.generate(s)},P=async()=>{var n;const s={emotion:t.value.emotion,content:t.value.content,feedback:t.value.feedback,feedbackCode:"SUCCESS"};await $.createDiary((n=a.value)==null?void 0:n.name,s)&&(u.value=!1,r.value=!0)};return(s,l)=>{var n;return i(),c("div",q,[r.value?p("",!0):(i(),c("section",Q,[J,e("article",X,[(i(),c(G,null,U(C,(o,d)=>e("button",{key:d,class:N(["emotion-box",t.value.emotion===o?"bg-[#D0A7EB]":"bg-white"]),onClick:g=>I(o)},[e("img",{src:`/icons/emotions/${o}.svg`,alt:"emotion",class:"w-[60px]"},null,8,ee)],10,Z)),64))]),te])),t.value.emotion?(i(),c("section",se,[e("article",ae,[e("div",oe,[e("div",ne,[e("label",le,h(B()),1),ce]),e("span",ie,[e("img",{src:`/icons/emotions/${t.value.emotion}.svg`,alt:"emotion",class:"w-[30px]"},null,8,de),e("p",null,h(t.value.emotion),1)])]),e("div",re,[b(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=o=>t.value.content=o),class:"h-[calc(45vh)]",disable:r.value},null,8,ue),[[w,t.value.content]]),e("p",me,h(t.value.content.length)+"/1000 ",1)]),r.value?(i(),c("div",pe,ve)):p("",!0)]),r.value?p("",!0):(i(),c("div",he,[e("button",{class:"btn-primary p-[10px]",onClick:T,disabled:u.value},[u.value?(i(),c("img",fe)):(i(),c("p",ge,"Submit"))],8,xe)]))])):p("",!0),r.value?(i(),c("section",ye,[e("div",be,[e("p",we,"To. "+h((n=a.value)==null?void 0:n.name),1)]),b(e("textarea",{"onUpdate:modelValue":l[1]||(l[1]=o=>t.value.feedback=o),class:"h-[calc(50vh)]",disabled:""},null,512),[[w,t.value.feedback]]),ke])):p("",!0)])}}}),Ie=K($e,[["__scopeId","data-v-a40b45cf"]]);export{Ie as default};
