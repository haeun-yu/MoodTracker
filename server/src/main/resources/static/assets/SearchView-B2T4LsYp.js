import{a as S}from"./auth-wfKwW2uC.js";import{d as D}from"./diary-DNHHjzZI.js";import{d as V,u as B,r as n,l as E,n as g,k as j,c as r,b as e,e as A,t as u,y as I,F as $,x as M,m as F,g as d,p as K,i as N,_ as z}from"./index-DD4kE7Gc.js";import{_ as G}from"./CommonInput.vue_vue_type_script_setup_true_lang-CJwuk6Nh.js";const P="/icons/page-nation-left.svg",p=_=>(K("data-v-48533fcc"),_=_(),N(),_),H={class:"w-full flex flex-col items-center justify-between border-b-[2px] border-black pb-[60px]"},U=p(()=>e("h3",{class:"text-4xl-bold mb-[60px] text-[#222222]"},"SEARCH",-1)),q={class:"flex item-center gap-[10px] w-[80%]"},J={class:"w-full flex flex-col items-center justify-between pt-[10px]"},O={key:0,class:"pt-[100px]"},Q=p(()=>e("p",{class:"text-xl-regular"},"검색 결과가 없습니다.",-1)),W=[Q],X={key:1,class:"w-full flex flex-col gap-[20px]"},Y={class:"flex items-center justify-between"},Z={class:"text-lg-bold"},ee={class:"flex items-center gap-[10px]"},se=p(()=>e("span",{class:"w-[5px] h-[5px] bg-black rounded-full"},null,-1)),te={class:"search-result-container"},ae={class:"w-[10%]"},le=["src"],oe={class:"w-[80%] ellipsis"},ne={class:"w-full flex items-center justify-center gap-[10px]"},ce=["disabled"],ie=p(()=>e("img",{src:P,class:"w-[30px]"},null,-1)),re=[ie],ue=["disabled"],de=p(()=>e("img",{src:P,class:"w-[30px] -scale-x-100"},null,-1)),pe=[de],h=10,_e=V({__name:"SearchView",setup(_){const f=F(),{addToast:b}=B(),c=n(!0),x=n(null),i=n(""),t=n(1),v=n(1),m=n([]),a=n([]);E(async()=>{await S.checkLogin()||(b({message:"로그인이 필요합니다."}),f.push("/login"));const s=await S.getInformation();s||(b({message:"서버에 문제가 발생했습니다. 다시 시도해주세요."}),f.push("/")),x.value=s;const o=await D.searchDiaryByKeyword(x.value.name,"");m.value=o,a.value=m.value,k()}),g(c,()=>{w()}),g(i,()=>{y()}),g([a,t],()=>{k()});const w=()=>{a.value=c.value?a.value.sort((l,s)=>new Date(s.date).getTime()-new Date(l.date).getTime()):a.value.sort((l,s)=>new Date(l.date).getTime()-new Date(s.date).getTime())},y=async()=>{const l=await D.searchDiaryByKeyword(x.value.name,i.value);m.value=l,a.value=m.value.filter(s=>s.content.includes(i.value)),t.value=1,w()},k=()=>{v.value=Math.ceil(a.value.length/h)},C=j(()=>{const l=(t.value-1)*h;return a.value.slice(l,l+h)}),T=()=>{t.value>1&&(t.value-=1)},L=()=>{t.value<v.value&&(t.value+=1)};return(l,s)=>(d(),r("div",null,[e("section",H,[U,e("article",q,[A(G,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o)},null,8,["modelValue"]),e("button",{class:"btn-primary px-[30px] py-[10px] text-xl-bold",onClick:y}," 검색 ")])]),e("section",J,[a.value.length<=0?(d(),r("article",O,W)):(d(),r("article",X,[e("div",Y,[e("label",Z,"검색 결과("+u(a.value.length)+")",1),e("div",ee,[e("button",{class:I(c.value?"text-lg-bold":"text-lg-regular"),onClick:s[1]||(s[1]=o=>c.value=!0)}," 최신 순 ",2),se,e("button",{class:I(c.value?"text-lg-regular":"text-lg-bold"),onClick:s[2]||(s[2]=o=>c.value=!1)}," 오래된 순 ",2)])]),e("div",te,[(d(!0),r($,null,M(C.value,(o,R)=>(d(),r("div",{key:R,class:"search-result-list"},[e("p",ae,u(o.date),1),e("img",{src:`/icons/emotions/${o.emotion}.svg`,alt:"emotion",class:"w-[2%]"},null,8,le),e("p",oe,u(o.content),1)]))),128))]),e("div",ne,[e("button",{onClick:T,disabled:t.value<=1},re,8,ce),e("span",null,u(t.value)+" / "+u(v.value),1),e("button",{onClick:L,disabled:t.value>=v.value},pe,8,ue)])]))])]))}}),he=z(_e,[["__scopeId","data-v-48533fcc"]]);export{he as default};
