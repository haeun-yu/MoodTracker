import{d as V,u as B,r as n,m as j,a as S,q as x,l as A,c as u,e,f as E,t as r,A as D,F as $,z as M,n as z,h as d,p as F,j as K,_ as N}from"./index-BJb9-PwR.js";import{d as I}from"./diary-n7vNuVSz.js";import{_ as q}from"./CommonInput.vue_vue_type_script_setup_true_lang-C1OleTEU.js";const P="/icons/page-nation-left.svg",p=_=>(F("data-v-bd8fd9e6"),_=_(),K(),_),G={class:"w-full flex flex-col items-center justify-between border-b-[2px] border-black pb-[60px]"},H=p(()=>e("h3",{class:"text-4xl-bold mb-[60px] text-[#222222]"},"SEARCH",-1)),U={class:"flex item-center gap-[10px] w-[80%]"},J={class:"w-full flex flex-col items-center justify-between pt-[10px]"},O={key:0,class:"pt-[100px]"},Q=p(()=>e("p",{class:"text-xl-regular"},"검색 결과가 없습니다.",-1)),W=[Q],X={key:1,class:"w-full flex flex-col gap-[20px]"},Y={class:"flex items-center justify-between"},Z={class:"text-lg-bold"},ee={class:"flex items-center gap-[10px]"},se=p(()=>e("span",{class:"w-[5px] h-[5px] bg-black rounded-full"},null,-1)),te={class:"search-result-container"},ae={class:"w-[10%]"},le=["src"],oe={class:"w-[80%] ellipsis"},ne={class:"w-full flex items-center justify-center gap-[10px]"},ce=["disabled"],ie=p(()=>e("img",{src:P,class:"w-[30px]"},null,-1)),ue=[ie],re=["disabled"],de=p(()=>e("img",{src:P,class:"w-[30px] -scale-x-100"},null,-1)),pe=[de],m=10,_e=V({__name:"SearchView",setup(_){const f=z(),{addToast:b}=B(),c=n(!0),g=n(null),i=n(""),t=n(1),v=n(1),h=n([]),a=n([]);j(async()=>{await S.checkLogin()||(b({message:"로그인이 필요합니다."}),f.push("/login"));const s=await S.getInformation();s||(b({message:"서버에 문제가 발생했습니다. 다시 시도해주세요."}),f.push("/")),g.value=s;const o=await I.searchDiaryByKeyword(g.value.name,"");console.log(o),h.value=o,a.value=h.value,k()}),x(c,()=>{w()}),x(i,()=>{y()}),x([a,t],()=>{k()});const w=()=>{a.value=c.value?a.value.sort((l,s)=>new Date(s.date).getTime()-new Date(l.date).getTime()):a.value.sort((l,s)=>new Date(l.date).getTime()-new Date(s.date).getTime())},y=async()=>{const l=await I.searchDiaryByKeyword(g.value.name,i.value);h.value=l,a.value=h.value.filter(s=>s.content.includes(i.value)),t.value=1,w()},k=()=>{v.value=Math.ceil(a.value.length/m)},C=A(()=>{const l=(t.value-1)*m;return a.value.slice(l,l+m)}),T=()=>{t.value>1&&(t.value-=1)},L=()=>{t.value<v.value&&(t.value+=1)};return(l,s)=>(d(),u("div",null,[e("section",G,[H,e("article",U,[E(q,{modelValue:i.value,"onUpdate:modelValue":s[0]||(s[0]=o=>i.value=o)},null,8,["modelValue"]),e("button",{class:"btn-primary px-[30px] py-[10px] text-xl-bold",onClick:y}," 검색 ")])]),e("section",J,[a.value.length<=0?(d(),u("article",O,W)):(d(),u("article",X,[e("div",Y,[e("label",Z,"검색 결과("+r(a.value.length)+")",1),e("div",ee,[e("button",{class:D(c.value?"text-lg-bold":"text-lg-regular"),onClick:s[1]||(s[1]=o=>c.value=!0)}," 최신 순 ",2),se,e("button",{class:D(c.value?"text-lg-regular":"text-lg-bold"),onClick:s[2]||(s[2]=o=>c.value=!1)}," 오래된 순 ",2)])]),e("div",te,[(d(!0),u($,null,M(C.value,(o,R)=>(d(),u("div",{key:R,class:"search-result-list"},[e("p",ae,r(o.date),1),e("img",{src:`/icons/emotions/${o.emotion}.svg`,alt:"emotion",class:"w-[2%]"},null,8,le),e("p",oe,r(o.content),1)]))),128))]),e("div",ne,[e("button",{onClick:T,disabled:t.value<=1},ue,8,ce),e("span",null,r(t.value)+" / "+r(v.value),1),e("button",{onClick:L,disabled:t.value>=v.value},pe,8,re)])]))])]))}}),xe=N(_e,[["__scopeId","data-v-bd8fd9e6"]]);export{xe as default};
